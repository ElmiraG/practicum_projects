# Определение стоимости автомобилей

Сервис по продаже автомобилей с пробегом разрабатывает приложение для привлечения новых клиентов. В нём можно быстро узнать рыночную стоимость своего автомобиля. В распоряжении исторические данные: технические характеристики, комплектации и цены автомобилей. Необходимо построить модель для определения стоимости. 

Заказчику важны:

- качество предсказания;
- скорость предсказания;
- время обучения.

# План по выполнению проекта
1. Загрузка данных
2. Предобработка и исследовательский анализ данных
3. Подготовка выборок для обучения
4. Выбор и обучение моделей
5. Анализ моделей. Вывод

# Описание данных

- **/datasets/autos.csv** - ссылка на данные

**Признаки**

- **DateCrawled** — дата скачивания анкеты из базы
- **VehicleType** — тип автомобильного кузова
- **RegistrationYear** — год регистрации автомобиля
- **Gearbox** — тип коробки передач
- **Power** — мощность (л. с.)
- **Model** — модель автомобиля
- **Kilometer** — пробег (км)
- **RegistrationMonth** — месяц регистрации автомобиля
- **FuelType** — тип топлива
- **Brand** — марка автомобиля
- **Repaired** — была машина в ремонте или нет
- **DateCreated** — дата создания анкеты
- **NumberOfPictures** — количество фотографий автомобиля
- **PostalCode** — почтовый индекс владельца анкеты (пользователя)
- **LastSeen** — дата последней активности пользователя

**Целевой признак**

- **Price** — цена (евро)

# Вывод по проекту
**Лучшая модель по итогам проекта: LGBMRegressor с гиперпараметрами:**

- n_estimators=100
- learning_rate=0.2
- max_depth=8
- random_state=12345 

Даная модель обучалась на выборке, в которой признаки типа object, такие как 'model', 'brand', 'fueltype', были преобразованы с использованием PCA. Эти признаки содержали большое количество уникальных значений, что затрудняло их обработку иными способами. Было принято решение оставить 50 компонентов, поскольку они описывали почти 90% данных.

Модели из этой выборки показали лучшие результаты 

**Первоначальный датасет прошел предобработку в 4 этапа:** 

**1. Общий анализ:** 

    - Перевод названий признаков в соответствии с рекомендациями PEP 8
    - Изменение типа данных: 
      - столбцов с датами в формат datetime
    - Удаление признака с количеством фотографий автомобиля, так как весь столбец заполнен нулями
    - Удаление дубликатов

**2. Анализ содержащих даты признаков:**

   **Признаки, содержащие даты обработаны следующим образом:**
 
    - Аномальные значения в признаке с годом регистрации обработаны
    - Удалены признаки: 'date_created', 'last_seen', 'registration_month', 'date_crawled'.
 
   **После обработки данных обнаружено, что:**
   
    - Более новые автомобили в среднем стоют дороже.
    - Чаще всего машины регистрируют в марте, июне и апреле, реже в феврале.
    - Даты последней активности пользователей распределены практически равномерно с начала марта по 4 апреля 2016 года, с 6 по     девятое апреля сильный скачок, что говорит о большом количестве активных пользователей.
    - В основном, пользователи стали регистрировать на сайте с марта 2016 года.

**3. Анализ численных признаков:**

   **Численные признаки обработаны следующим образом:**

    - Данные с аномальной высокими и низкими значениями мощности и цены удалены. 

   **После обработки данных обнаружено, что:**
   
    - Зависимость мощности автомобиля от цены практически линейна. На градус наклонна влияет пробег автомобиля. 

**4. Анализ категориальных признаков:**

   **Установленно что:**
   
    - 20.9% автомобилей в выборке с автоматической коробкой передач, 77,9% с механической, для 1,2% тип коробки передач не указан
    - 8.2% с указанием, что были в ремонте, 80,8% - не были, 11% пропущенных значения
    - Топ три типа траспортных средств: sedan (29.1%), small (22.9%), wagon (20.9%).
    - 1.1% автомобилей без указания типа транспортного средства
    - На бензине 62.6% транспортных средств, на газе - 32.4%, не указан тип топлива для 3.1%
    - 5% автомобилей имеют тип топлива: lpg, cng, hybrid, other и electric.
    - В наборе данных 242 типа моделей автомобилей и 40 брендов. 

   **Было произведено заполнение пропущенных значений часто встречающимися значениями для каждого столбца.**
